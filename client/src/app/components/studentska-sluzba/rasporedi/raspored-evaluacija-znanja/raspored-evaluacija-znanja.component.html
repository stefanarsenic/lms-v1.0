<p-toast></p-toast>
<div class="flexbox">
  <div class="dropdowns">
    <p-dropdown (onChange)="getPredmeti()" [options]="studijskiProgrami" [(ngModel)]="selectedStudijskiProgram" optionLabel="naziv" placeholder="Izaberite Studijski Program"></p-dropdown>
    <p-dropdown (onChange)="getPredmeti()" [options]="semestri" [(ngModel)]="selectedSemestar" optionLabel="redniBrojSemestra" placeholder="Izaberite Semestar"></p-dropdown>
  </div>
  <p-toast></p-toast>
  <p-confirmPopup></p-confirmPopup>
</div>

<full-calendar #calendar *ngIf='calendarVisible()' [options]='calendarOptions()'>
  <ng-template #eventContent let-arg>
    <b>{{ arg.timeText }}</b>
    <i>{{ arg.event.title }}</i>
    <br>
    <i>{{ arg.event.extendedProps.description }}</i>
  </ng-template>
</full-calendar>

<p-dialog
  [visible]="visible"
  [showHeader]="false"
  [style]="{width: '35vw'}"
  [modal]="true"
  [draggable]="false">

  <div class="header">
    <div class="row">
      <h3>Nova Evaluacija Znanja</h3>
      <div>
        <span class="p-buttonset">
        <button pButton (click)="sacuvaj()" class="p-button-sm" type="button" label="Sacuvaj" icon="pi pi-check"></button>
        <button pButton (click)="closeDialog()" severity="secondary" class="p-button-outlined p-button-sm" type="button" label="Otkazi" icon="pi pi-times"></button>
      </span>
      </div>
    </div>
  </div>

  <div class="form-container">
    <div class="form-row">
      <div class="form-group">
        <label>Pocetak:</label>
        <p-calendar [(ngModel)]="pocetak"></p-calendar>
      </div>
      <div class="form-group">
        <label>Kraj:</label>
        <p-calendar [(ngModel)]="kraj"></p-calendar>
      </div>
      <div class="form-group">
        <label>Bodovi:</label>
        <p-inputNumber [(ngModel)]="bodovi" mode="decimal" [showButtons]="true" [min]="0" [max]="30"></p-inputNumber>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <p-dropdown [style]="{'width': '100%'}" [options]="predmeti" [(ngModel)]="selectedPredmet" placeholder="Izaberite Predmet" optionLabel="naziv" [showClear]="true"></p-dropdown>
      </div>
      <div class="form-group">
        <p-dropdown [style]="{'width': '100%'}" [options]="tipoviEvaluacije" [(ngModel)]="selectedTipEvaluacije" placeholder="Izaberite Tip Evaluacije" optionLabel="naziv" [showClear]="true"></p-dropdown>
      </div>
    </div>
    <div class="form-group">
      <label for="editor">Opis Ishoda:</label>
      <textarea [(ngModel)]="opis" id="editor"></textarea>
    </div>

    <div class="form-group file-upload">
      <label>Izaberite instrument evaluacije:</label>
      <div class="file-upload-wrapper">
        <input type="file" id="file-upload" (change)="onFileSelected($event)">
        <label for="file-upload" class="file-upload-button">Choose File</label>
        {{ selectedFile?.name }}
      </div>
    </div>
  </div>

</p-dialog>

<p-dialog header="Brisanje Evaluacije Znanja" [modal]="true" [(visible)]="deleteEvaluacijaVisible" [style]="{ width: '25rem' }" draggable="false">
  <div class="flex justify-content-end gap-2">
    <p-button label="Otkazi" severity="secondary" (onClick)="deleteEvaluacijaVisible = false" />
    <p-button label="Obrisi" severity="danger" (onClick)="deleteEvaluacijaZnanja($event)" />
  </div>
  <p-confirmPopup></p-confirmPopup>
</p-dialog>
